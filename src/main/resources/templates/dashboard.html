<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:replace="~{base::layout(~{::section})}">

<section class="container-fluid px-4 mt-3">
	<link rel="stylesheet" th:href="@{/css/common.css}">

	<div class="page-header">
		<h4 class="mb-0">Dashboard Overview</h4>
		<div class="text-muted small">
			<i class="fas fa-calendar-alt me-1"></i>
			<span th:text="${#temporals.format(#temporals.createNow(), 'dd MMMM yyyy')}"></span>
		</div>
	</div>

	<div class="row g-4 mb-4">
		<div class="col-xl-3 col-md-6" th:each="stat : ${stats}">
			<div class="card custom-card border-0 p-3 shadow-sm">
				<div class="d-flex justify-content-between align-items-start">
					<div>
						<p class="text-muted small text-uppercase fw-bold mb-1" th:text="${stat.label}"></p>
						<h3 class="fw-bold mb-1" th:text="${stat.value}"></h3>
						<span class="badge bg-soft-success text-success p-1 px-2" style="font-size: 0.7rem;">
                      <i class="fas fa-chart-line me-1"></i> <span th:text="${stat.sub}"></span>
                   </span>
					</div>
					<div class="icon-box shadow-sm d-flex align-items-center justify-content-center"
					     th:classappend="${stat.bg}"
					     style="width: 48px; height: 48px; border-radius: 12px; flex-shrink: 0;">
						<i th:class="${stat.icon}" style="font-size: 1.25rem;"></i>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="row g-4">
		<div class="col-lg-4">
			<div class="card custom-card h-100">
				<div class="card-header bg-transparent border-0 pt-3">
					<h6 class="fw-bold mb-0 text-danger"><i class="fas fa-exclamation-circle me-2"></i>Low Stock Alert</h6>
				</div>
				<div class="card-body">
					<div class="alert alert-light border-0 mb-2 py-2 d-flex justify-content-between align-items-center"
					     th:each="item : ${lowStock}"
					     style="background: #fff5f5;">
						<div>
							<strong class="d-block text-dark" th:text="${item.name}"></strong>
							<small class="text-muted" th:text="${item.qty + ' units remaining'}"></small>
						</div>
						<span class="badge bg-danger rounded-pill">Critical</span>
					</div>
				</div>
			</div>
		</div>

		<div class="col-lg-4">
			<div class="card custom-card h-100">
				<div class="card-header bg-transparent border-0 pt-3">
					<h6 class="fw-bold mb-0 text-warning"><i class="fas fa-hourglass-half me-2"></i>Expiring Soon</h6>
				</div>
				<div class="card-body">
					<div class="alert alert-light border-0 mb-2 py-2"
					     th:each="item : ${expiring}"
					     style="background: #fff9eb;">
						<strong class="d-block text-dark" th:text="${item.name}"></strong>
						<small class="text-muted"><i class="far fa-calendar-times me-1"></i>Expires: <span th:text="${item.date}"></span></small>
					</div>
				</div>
			</div>
		</div>

		<div class="col-lg-4">
			<div class="card custom-card h-100">
				<div class="card-header bg-transparent border-0 pt-3">
					<h6 class="fw-bold mb-0 text-primary"><i class="fas fa-history me-2"></i>Recent Activity</h6>
				</div>
				<div class="card-body p-0">
					<div class="list-group list-group-flush">
						<div class="list-group-item border-0 py-3 bg-transparent" th:each="log : ${activities}">
							<div class="d-flex justify-content-between align-items-center">
								<div>
									<strong class="d-block mb-1 text-dark" th:text="${log.title}"></strong>
									<small class="text-muted" th:text="${log.time}"></small>
								</div>
								<span class="fw-bold text-success" th:text="${log.amount}"></span>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>
</html>