<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:replace="~{base::layout(~{::section})}">
<section class="container-fluid px-4 mt-3 profile-page">
	<link rel="stylesheet" th:href="@{/css/common.css}">

	<div class="page-header">
		<h4 class="mb-0">My Profile</h4>
		<div class="text-muted small">
			<i class="fas fa-user-shield me-1"></i> Account Status:
			<span class="badge" th:classappend="${user.isAdmin() ? 'bg-success' : 'bg-primary'}"
			      th:text="${user.accountType}"></span>
		</div>
	</div>

	<div class="row">
		<div class="col-xl-4 col-lg-5">
			<div class="card custom-card text-center p-4 mb-4">
				<div class="profile-avatar-wrapper mb-3">
					<div class="profile-avatar-circle mx-auto">
						<i class="fas fa-user-tie text-white"></i>
					</div>
				</div>
				<h4 class="fw-bold mb-1" th:text="${user.name}">User</h4>
				<p class="text-muted mb-3" th:text="${user.email}">user@example.com</p>

				<div class="mt-auto">
					<a th:href="@{/settings}" class="btn btn-action text-decoration-none">
						<i class="fas fa-edit me-2"></i> Edit Profile
					</a>
				</div>
			</div>
		</div>

		<div class="col-xl-8 col-lg-7">
			<div class="card custom-card">
				<div class="card-header bg-transparent border-0 pt-3">
					<h6 class="fw-bold mb-0 text-primary">
						<i class="fas fa-id-card me-2"></i> Account Details
					</h6>
				</div>
				<div class="card-body">
					<div class="row g-4">
						<div class="col-md-6">
							<label class="text-muted small text-uppercase fw-bold">User ID</label>
							<p class="td-id fs-5 mb-0" th:text="${user.id}">USR-XXXXXX</p>
						</div>
						<div class="col-md-6">
							<label class="text-muted small text-uppercase fw-bold">Username</label>
							<p class="fs-5 mb-0" th:text="${user.username}">username</p>
						</div>
						<div class="col-md-6">
							<label class="text-muted small text-uppercase fw-bold">Account Type</label>
							<p class="fs-5 mb-0">
								<i class="fas fa-user-tag me-2 text-muted"></i>
								<span th:text="${user.getAccountTypeString()}"></span>
							</p>
						</div>
						<div class="col-md-6">
							<label class="text-muted small text-uppercase fw-bold">Total Sales Managed</label>
							<p class="fs-5 mb-0">
								<i class="fas fa-chart-line me-2 text-success"></i>
								<span th:text="${user.sales.size()}">0</span> Records
							</p>
						</div>
					</div>

					<div th:if="${user.isAdmin() or config.logLevel.name() == 'DEBUG'}" class="mt-4 pt-3 border-top">
						<label class="text-muted small text-uppercase fw-bold d-block mb-3">
							<i class="fas fa-tools me-1"></i> Developer Tools
							<span th:if="${config.logLevel.name() == 'DEBUG'}" class="badge bg-warning text-dark ms-2">DEBUG MODE</span>
						</label>

						<div class="p-3 bg-light rounded border d-flex align-items-center justify-content-between">
							<div>
								<h6 class="mb-1 fw-bold text-dark">Manual Inventory Update</h6>
								<p class="text-muted small mb-0">Manually trigger the inventory forecasting and ROP logic.</p>
							</div>

							<form th:action="@{/dev/trigger-forecast}" method="post"
							      onsubmit="return confirm('Trigger the manual update?')">
								<button type="submit" class="btn btn-outline-primary shadow-sm">
									<i class="fas fa-play me-2"></i> Trigger Now
								</button>
							</form>
						</div>
					</div>

					<hr class="my-4 opacity-50">

					<div class="alert alert-info border-0 d-flex align-items-center mb-0">
						<i class="fas fa-info-circle me-3 fa-lg"></i>
						<div>
							Passwords are encrypted for your security. To change your password, please use the <strong>Security Settings</strong> panel.
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>
</html>